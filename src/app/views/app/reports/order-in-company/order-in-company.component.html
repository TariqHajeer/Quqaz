<div class="card">
    <div class="card-body">
      <h3>الطلبات التي في الشركة</h3>
  
      <div class="row">
        <div class="col-md-3">
            <label>العميل</label>
            <ng-select [(ngModel)]="ClientId" [ngModelOptions]="{standalone: true}" [closeOnSelect]="true" name="Client"
              (change)="changeClientId()">
              <ng-option *ngFor="let Client of Clients" [value]="Client.id">{{Client.name}}</ng-option>
            </ng-select>
          </div>
        <div class="col-md-3">
          <label>كود الشحنة</label>
          <input type="text" class="form-control"  (keyup.enter)="addOrder()" [ngModelOptions]="{standalone: true}" [(ngModel)]="Code">
        
        </div>
        <div class="col-md-3" style="padding-top: 25px;">
          <button (click)="addOrder()"  class="btn btn-primary"> عرض شحنة</button>
  
        </div>
  
  
      </div>
  
  <div class="row">
    <div class="col-5">
  
    </div>
    
    <div class="col-2">
      <label>حالة الشحنة</label>
      <ng-select  appendTo="body" [(ngModel)]="OrderplacedId" [ngModelOptions]="{standalone: true}" [clearable]="false"
       name="Orderplaced" (ngModelChange)="changeOrderPlaced()" style="width: 120px; overflow: visible;">
        <ng-option *ngFor="let order of orderPlace " [value]="order">{{order.name}}</ng-option>
      </ng-select>
    </div>
    <div class="col-2">
      <label>موقع المبلغ</label>
      <ng-select appendTo="body"[(ngModel)]="MoenyPlacedId" [ngModelOptions]="{standalone: true}" style="width: 120px;"
      [clearable]="false" (ngModelChange)="changeMoenyPlaced()" name="MonePlaced">
      <ng-option *ngFor="let moenyPlaced of getMoenyPlaced" [value]="moenyPlaced">{{moenyPlaced.name}}
      </ng-option>
    </ng-select>
    </div>
    <div class="col-1">
  
    </div>
  </div>
    </div>
  </div>
  
  <div class="example-container mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
  
      <ng-container matColumnDef="code">
        <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-right: 10px;"> كود </th>
        <td mat-cell *matCellDef="let element" style="padding-right: 10px;"> {{element.order.code}}</td>
      </ng-container>
     
      <ng-container matColumnDef="country">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> المدينة</th>
        <td mat-cell *matCellDef="let element"> {{element.order.country!=null?element.order.country.name:null}}</td>
      </ng-container>
      <ng-container matColumnDef="region">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> المنطقة</th>
        <td mat-cell *matCellDef="let element"> {{element.order.region!=null?element.order.region.name:null}}</td>
      </ng-container>
      <ng-container matColumnDef="cost">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> كلفة الشحنة</th>
        <td mat-cell *matCellDef="let element;index as i">
          <h4 *ngIf="element.canEditCount">{{element.order.cost}}</h4>
          <input type="text" class="form-control" [ngModelOptions]="{standalone: true}" *ngIf="!element.canEditCount"
            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
            [(ngModel)]="element.order.cost"  style="width: 110px;"><!--(ngModelChange)=" changeCost(element,i)"-->
            <h5 style="color: red;"> {{element.messageCost}}</h5>
        </td> 
      </ng-container>
      <ng-container matColumnDef="orderplaced">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> حالة الشحنة</th>
        <td mat-cell *matCellDef="let element;index as i">
          <ng-select  appendTo="body" [(ngModel)]="element.order.orderplaced.id" [ngModelOptions]="{standalone: true}" [clearable]="false"
          id="i*2" name="Orderplaced" (change)="ChangeOrderplacedId(element,i)" style="width: 120px; overflow: visible;">
            <ng-option *ngFor="let order of element.OrderPlaced " [value]="order.id">{{order.name}}</ng-option>
          </ng-select>
        </td>
      </ng-container>
      <ng-container matColumnDef="monePlaced">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> موقع المبلغ</th>
        <td mat-cell *matCellDef="let element;index as i">
          <ng-select appendTo="body"[(ngModel)]="element.order.monePlaced.id" [ngModelOptions]="{standalone: true}" style="width: 120px;"
            [clearable]="false" name="MonePlaced" id="i*5">
            <ng-option *ngFor="let moenyPlaced of element.MoenyPlaced" [value]="moenyPlaced.id">{{moenyPlaced.name}}
            </ng-option>
          </ng-select>
        </td>
      </ng-container>
      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <button (click)="print()" class="btn btn-primary"> المعاينة قبل الطباعة</button>
  
        </th>
        <td mat-cell *matCellDef="let element">
          <svg (click)="CancelOrder(element)" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
          fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"style="cursor: pointer;">
          <path
            d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
          <path fill-rule="evenodd"
            d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
        </svg>
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
      </tr>
    </table>
    <div *ngIf="showcount" style=" padding: 10px 29% 10px 10px; background-color: white;font-size: 15px;"> 
      الإجمالي : {{count}}
    </div>
  
    <h5 style="padding-top: 20px; padding-right: 10px;" *ngIf="noDataFound">لايوجد بيانات للعرض</h5>
  </div>
<!--  <mat-paginator showFirstLastButtons [length]="totalCount" [pageSize]="paging.RowCount"
    [pageSizeOptions]="paging.selectItemsPerPage" (page)="switchPage($event)"></mat-paginator>
  -->
   
         <mat-paginator [length]="100"
        [pageSize]="10"
        [pageSizeOptions]="[ 10, 25,50, 100]">
      </mat-paginator>
       
  <simple-notifications></simple-notifications>